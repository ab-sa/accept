<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Acute COPD Exacerbation Prediction Tool (ACCEPT) • accept</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="The Acute COPD Exacerbation Prediction Tool (ACCEPT)">
<meta property="og:description" content="Allows clinicians to predict the rate and severity of future acute exacerbation in Chronic Obstructive Pulmonary Disease (COPD) patients, based on the clinical prediction model published in Adibi et al. (2020) &lt;doi:10.1016/S2213-2600(19)30397-2&gt;. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">accept</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.8.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="accept" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#accept" class="anchor"></a>accept</h1></div>
<p>R package for the ACute COPD Exacerbation Prediction Tool (ACCEPT)</p>
<p>Please refer to the published paper for more information:</p>
<p>Adibi A, Sin DD, Safari A, Jonhson KM, Aaron SD, FitzGerald JM, Sadatsafavi M. The Acute COPD Exacerbation Prediction Tool (ACCEPT): a modelling study. The Lancet Respiratory Medicine. Published Online First 2020 March 13th; <a href="https://www.thelancet.com/journals/lanres/article/PIIS2213-2600%2819%2930397-2/fulltext">doi:10.1016/S2213-2600(19)30397-2</a></p>
<p>The following animation explains the <code>accept</code> model in 90 seconds:</p>
<p><a href="https://www.youtube.com/watch?v=UuGLN128Z3Y"><img src="https://img.youtube.com/vi/UuGLN128Z3Y/0.jpg" alt="IMAGE ALT TEXT HERE"></a></p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The latest stable version can be downloaded from CRAN:<br><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages ('accept')</a></code></p>
<p>Alternatively, you can download the latest development version from GitHub:</p>
<pre><code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages("remotes")
remotes::install_github("resplab/accept")</a></code></pre>
</div>
</div>
<div id="web-app-for-accept" class="section level1">
<h1 class="hasAnchor">
<a href="#web-app-for-accept" class="anchor"></a>Web App for ACCEPT</h1>
<p>ACCEPT is also available as web app, accessible at <a href="http://resp.core.ubc.ca/ipress/accept">http://resp.core.ubc.ca/ipress/accept</a></p>
</div>
<div id="accept-in-r" class="section level1">
<h1 class="hasAnchor">
<a href="#accept-in-r" class="anchor"></a>ACCEPT in R</h1>
<div id="sample-data" class="section level3">
<h3 class="hasAnchor">
<a href="#sample-data" class="anchor"></a>Sample Data</h3>
<p>To get started, there is an R data frame with the package of sample patient data. I have printed columns 1-13 and 14-19 separately because there isn’t enough space:</p>
<pre><code><a href="https://rdrr.io/r/base/library.html">library(accept)
samplePatients &lt;- accept::samplePatients
</a></code></pre>
</div>
<div id="exacerbation-prediction" class="section level3">
<h3 class="hasAnchor">
<a href="#exacerbation-prediction" class="anchor"></a>Exacerbation Prediction</h3>
<p>To get a prediction for exacerbation rate, you will need to pass in a patient vector:</p>
<pre><code>results &lt;- accept(samplePatients[1,])
print(t(results))</code></pre>
<p>The <strong>accept()</strong> function returns a data frame with the original patient data, along with the predictions for different treatment options.</p>
<p>To visualize the data, there is a graphing function called <strong>plotExacerbations()</strong>, which creates a Plotly bar graph. You have the option of selecting <strong>probability</strong> or <strong>rate</strong> for which prediction you want to see, and either <strong>CI</strong> or <strong>PI</strong> to select the confidence interval or prediction interval respectively.</p>
<pre><code><a href="reference/plotExacerbations.html">plotExacerbations(results, type="probability", interval = "CI")</a></code></pre>
<pre><code><a href="reference/plotExacerbations.html">plotExacerbations(results, type="probability", interval = "PI")</a></code></pre>
<pre><code><a href="reference/plotExacerbations.html">plotExacerbations(results, type="rate", interval = "CI")</a></code></pre>
</div>
<div id="probability-of-n-exacerbations-poisson" class="section level3">
<h3 class="hasAnchor">
<a href="#probability-of-n-exacerbations-poisson" class="anchor"></a>Probability of N Exacerbations (Poisson)</h3>
<p>We can also calculate the predicted number of exacerbations in a year:</p>
<pre><code>patientResults = accept(samplePatients[1,])
exacerbationsMatrix = predictCountProb(patientResults, n = 10, shortened = TRUE)
print(exacerbationsMatrix)</code></pre>
<p>The shortened parameter groups the probabilities from 3-10 exacerbations into one category, “3 or more exacerbations.” To see all n exacerbation probabilities:</p>
<pre><code>exacerbationsMatrix = predictCountProb(patientResults, n = 10, shortened = FALSE)
print(exacerbationsMatrix)</code></pre>
<p>To visualize the matrix as a heatmap, we can use the function <strong>plotHeatMap</strong>:</p>
<pre><code><a href="reference/plotHeatMap.html">plotHeatMap(patientResults, shortened = FALSE)</a></code></pre>
</div>
<div id="cloud-based-api-access" class="section level2">
<h2 class="hasAnchor">
<a href="#cloud-based-api-access" class="anchor"></a>Cloud-based API Access</h2>
<p>The <a href="http://www.peermodels.com">Peer Models Network</a> allows users to access ACCEPT through the cloud. A MACRO-enabled Excel-file can be used to interact with the model and see the results. To download the PRISM Excel template file for ACCEPT, please refer to the <a href="http://models.peermodels.com">Peer Models Network model repository</a>.</p>
<div id="python" class="section level4">
<h4 class="hasAnchor">
<a href="#python" class="anchor"></a>Python</h4>
<pre><code>import json
import requests
url = 'https://prism.peermodelsnetwork.com/route/accept/run'
headers = {'x-prism-auth-user': YOUR_API_KEY}
model_run = requests.post(url, headers=headers,
json = {"func":["prism_model_run"],"model_input":[{"ID": "10001","male": 1,"age": 57,"smoker": 0,"oxygen": 0,"statin": 0,"LAMA": 1,"LABA": 1,"ICS": 1,"FEV1": 51,"BMI": 18,"SGRQ": 63,"LastYrExacCount": 2,"LastYrSevExacCount": 1,"randomized_azithromycin": 0,"randomized_statin": 0,"randomized_LAMA": 0,"randomized_LABA": 0,"randomized_ICS": 0, "random_sampling_N" : 100,  "calculate_CIs" : "TRUE"}]})
print(model_run)
results = json.loads(model_run.text)
print(results)</code></pre>
</div>
<div id="linux-bash" class="section level4">
<h4 class="hasAnchor">
<a href="#linux-bash" class="anchor"></a>Linux Bash</h4>
<p>In Ubuntu, you can call the API with <code>curl</code>:</p>
<pre><code>curl \
-X POST \
-H "x-prism-auth-user: REPLACE_WITH_API_KEY" \
-H "Content-Type: application/json" \
-d '{"func":["prism_model_run"],"model_input":[{"ID": "10001","male": 1,"age": 57,"smoker": 0,"oxygen": 0,"statin": 0,"LAMA": 1,"LABA": 1,"ICS": 1,"FEV1": 51,"BMI": 18,"SGRQ": 63,"LastYrExacCount": 2,"LastYrSevExacCount": 1,"randomized_azithromycin": 0,"randomized_statin": 0,"randomized_LAMA": 0,"randomized_LABA": 0,"randomized_ICS": 0, "random_sampling_N" : 100, 
"calculate_CIs" : "TRUE"}]}' \
https://prism.peermodelsnetwork.com/route/accept/run</code></pre>
</div>
</div>
<div id="user-manual" class="section level2">
<h2 class="hasAnchor">
<a href="#user-manual" class="anchor"></a>User Manual</h2>
<p>An interactive user manual that describes the study, the web app, the API, and the R package is available <a href="https://resplab.github.io/acceptManual/section-introduction.html">here</a>.</p>
</div>
<div id="citation" class="section level2">
<h2 class="hasAnchor">
<a href="#citation" class="anchor"></a>Citation</h2>
<p>Please cite:</p>
<p>Adibi A, Sin DD, Safari A, Jonhson KM, Aaron SD, FitzGerald JM, Sadatsafavi M. The Acute COPD Exacerbation Prediction Tool (ACCEPT): a modelling study. The Lancet Respiratory Medicine. Published Online First 2020 March 13th; <a href="https://www.thelancet.com/journals/lanres/article/PIIS2213-2600%2819%2930397-2/fulltext">doi:10.1016/S2213-2600(19)30397-2</a></p>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=accept">https://​cloud.r-project.org/​package=accept</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/resplab/accept/actions"><img src="https://github.com/resplab/accept/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://cran.r-project.org/package=accept"><img src="https://www.r-pkg.org/badges/version/accept" alt="CRAN_Status_Badge"></a></li>
<li><a href="https://cran.r-project.org/package=accept"><img src="https://cranlogs.r-pkg.org/badges/accept" alt="metacran downloads"></a></li>
<li><a href="https://www.repostatus.org/#active"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status: Active – The project has reached a stable, usable state and is being actively developed."></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by .</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
